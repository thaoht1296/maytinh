/* ShapedPlugin Framework | A Lightweight and easy-to-use WordPress Options Framework - v1.0.0*/
!function(a,b,c,d){"use strict";a.SPFRAMEWORK=a.SPFRAMEWORK||{};var e=a("body"),f=e.hasClass("rtl");a.fn.SPFRAMEWORK_TAB_NAVIGATION=function(){return this.each(function(){var b=a(this),c=b.find(".sp-nav"),d=b.find(".sp-reset"),e=b.find(".sp-expand-all");c.find("ul:first a").on("click",function(b){b.preventDefault();var e=a(this),f=e.next(),g=e.data("section");f.is("ul")?(f.slideToggle("fast"),e.closest("li").toggleClass("sp-tab-active")):(a("#sp-tab-"+g).fadeIn("fast").siblings().hide(),c.find("a").removeClass("sp-section-active"),e.addClass("sp-section-active"),d.val(g))}),e.on("click",function(c){c.preventDefault(),b.find(".sp-body").toggleClass("sp-show-all"),a(this).find(".fa").toggleClass("fa-eye-slash").toggleClass("fa-eye")})})},a.SPFRAMEWORK.DEPENDENCY=function(b,c){var e=this;e.$el=a(b),e.el=b,e.init=function(){e.ruleset=a.deps.createRuleset();var b={show:function(a){a.removeClass("hidden")},hide:function(a){a.addClass("hidden")},log:!1,checkTargets:!1};c!==d?e.depSub():e.depRoot(),a.deps.enable(e.$el,e.ruleset,b)},e.depRoot=function(){e.$el.each(function(){a(this).find("[data-controller]").each(function(){var b=a(this),c=b.data("controller").split("|"),d=b.data("condition").split("|"),f=b.data("value").toString().split("|"),g=e.ruleset;a.each(c,function(a,c){var e=f[a]||"",h=d[a]||d[0];g=g.createRule('[data-depend-id="'+c+'"]',h,e),g.include(b)})})})},e.depSub=function(){e.$el.each(function(){a(this).find("[data-sub-controller]").each(function(){var b=a(this),c=b.data("sub-controller").split("|"),d=b.data("sub-condition").split("|"),f=b.data("sub-value").toString().split("|"),g=e.ruleset;a.each(c,function(a,c){var e=f[a]||"",h=d[a]||d[0];g=g.createRule('[data-sub-depend-id="'+c+'"]',h,e),g.include(b)})})})},e.init()},a.fn.SPFRAMEWORK_DEPENDENCY=function(b){return this.each(function(){new a.SPFRAMEWORK.DEPENDENCY(this,b)})},a.fn.SPFRAMEWORK_CHOSEN=function(){return this.each(function(){a(this).chosen({allow_single_deselect:!0,disable_search_threshold:15,width:parseFloat(a(this).actual("width")+25)+"px"})})},a.fn.SPFRAMEWORK_IMAGE_SELECTOR=function(){return this.each(function(){a(this).find("label").on("click",function(){a(this).siblings().find("input").prop("checked",!1)})})},a.fn.SPFRAMEWORK_SORTER=function(){return this.each(function(){var b=a(this),c=b.find(".sp-enabled"),d=b.find(".sp-disabled");c.sortable({connectWith:d,placeholder:"ui-sortable-placeholder",update:function(a,b){var c=b.item.find("input");b.item.parent().hasClass("sp-enabled")?c.attr("name",c.attr("name").replace("disabled","enabled")):c.attr("name",c.attr("name").replace("enabled","disabled"))}}),d.sortable({connectWith:c,placeholder:"ui-sortable-placeholder"})})},a.fn.SPFRAMEWORK_UPLOADER=function(){return this.each(function(){var b,c=a(this),d=c.find(".sp-add"),e=c.find("input");d.on("click",function(a){if(a.preventDefault(),"undefined"!=typeof wp&&wp.media&&wp.media.gallery){if(b)return void b.open();b=wp.media({title:d.data("frame-title"),library:{type:d.data("upload-type")},button:{text:d.data("insert-title")}}),b.on("select",function(){var a=b.state().get("selection").first();e.val(a.attributes.url).trigger("change")}),b.open()}})})},a.fn.SPFRAMEWORK_IMAGE_UPLOADER=function(){return this.each(function(){var b,c=a(this),d=c.find(".sp-add"),e=c.find(".sp-image-preview"),f=c.find(".sp-remove"),g=c.find("input"),h=c.find("img");d.on("click",function(a){if(a.preventDefault(),"undefined"!=typeof wp&&wp.media&&wp.media.gallery){if(b)return void b.open();b=wp.media({library:{type:"image"}}),b.on("select",function(){var a=b.state().get("selection").first().attributes,c="undefined"!=typeof a.sizes.thumbnail?a.sizes.thumbnail.url:a.url;e.removeClass("hidden"),h.attr("src",c),g.val(a.id).trigger("change")}),b.open()}}),f.on("click",function(a){a.preventDefault(),g.val("").trigger("change"),e.addClass("hidden")})})},a.fn.SPFRAMEWORK_IMAGE_GALLERY=function(){return this.each(function(){{var b,c,d=a(this),e=d.find(".sp-edit"),f=d.find(".sp-remove"),g=d.find("ul"),h=d.find("input");d.find("img")}d.on("click",".sp-add, .sp-edit",function(d){var i=a(this),j=i.hasClass("sp-edit")?"edit":"add",k="edit"===j?"gallery-edit":"gallery-library";if(d.preventDefault(),"undefined"!=typeof wp&&wp.media&&wp.media.gallery){if(b)return b.open(),void b.setState(k);b=wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0}),b.on("open",function(){var a=h.val();if(a){var c=a.split(","),d=b.state("gallery-edit").get("library");b.setState(k),c.forEach(function(a){var b=wp.media.attachment(a);d.add(b?[b]:[])})}}),b.on("update",function(){var a="",c=[],d=b.state().get("library");d.each(function(b){var d=b.attributes,e="undefined"!=typeof d.sizes.thumbnail?d.sizes.thumbnail.url:d.url;a+='<li><img src="'+e+'"></li>',c.push(d.id)}),h.val(c).trigger("change"),g.html("").append(a),f.removeClass("hidden"),e.removeClass("hidden")}),b.open(),c=j}}),f.on("click",function(a){a.preventDefault(),g.html(""),h.val("").trigger("change"),f.addClass("hidden"),e.addClass("hidden")})})},a.fn.SPFRAMEWORK_TYPOGRAPHY=function(){return this.each(function(){var b=a(this),c=b.find(".sp-typo-family"),d=b.find(".sp-typo-variant"),e=b.find(".sp-typo-font");c.on("change",function(){var b=a(this),c=b.find(":selected").data("type")||"custom",f=b.find(":selected").data("variants");d.length&&(d.find("option").remove(),a.each(f.split("|"),function(a,b){d.append('<option value="'+b+'">'+b+"</option>")}),d.find('option[value="regular"]').attr("selected","selected").trigger("chosen:updated")),e.val(c)})})},a.fn.SPFRAMEWORK_GROUP=function(){return this.each(function(){var b=a(this),c=b.find(".sp-groups"),d=b.find(".sp-accordion"),e=b.find(".sp-group:first").clone();d.length&&d.accordion({header:".sp-group-title",collapsible:!0,active:!1,animate:250,heightStyle:"content",icons:{header:"dashicons dashicons-arrow-right",activeHeader:"dashicons dashicons-arrow-down"},beforeActivate:function(b,c){a(c.newPanel).SPFRAMEWORK_DEPENDENCY("sub")}}),c.sortable({axis:"y",handle:".sp-group-title",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(a,b){var d=b.item.children(".sp-group-content");"block"===d.css("display")&&(d.hide(),c.sortable("refreshPositions"))},stop:function(a,b){b.item.children(".sp-group-title").triggerHandler("focusout"),d.accordion({active:!1})}});var f=0;a(".sp-add-group",b).on("click",function(a){a.preventDefault(),e.find("input, select, textarea").each(function(){this.name=this.name.replace(/\[(\d+)\]/,function(a,b){return"["+(parseInt(b,10)+1)+"]"})});var b=e.clone().removeClass("hidden");c.append(b),d.length&&(c.accordion("refresh"),c.accordion({active:b.index()})),c.find("input, select, textarea").each(function(){this.name=this.name.replace("[_nonce]","")}),b.SPFRAMEWORK_DEPENDENCY("sub"),b.SPFRAMEWORK_RELOAD_PLUGINS(),f++}),c.on("click",".sp-remove-group",function(b){b.preventDefault(),a(this).closest(".sp-group").remove()})})},a.fn.SPFRAMEWORK_CONFIRM=function(){return this.each(function(){a(this).on("click",function(a){confirm("Are you sure?")||a.preventDefault()})})},a.fn.SPFRAMEWORK_SAVE=function(){return this.each(function(){var b=a(this),d=b.data("save"),e=b.val(),f=a("#sp-save-ajax");a(c).on("keydown",function(a){(a.ctrlKey||a.metaKey)&&"s"===String.fromCharCode(a.which).toLowerCase()&&(a.preventDefault(),b.trigger("click"))}),b.on("click",function(c){if(f.length){"object"==typeof tinyMCE&&tinyMCE.triggerSave(),b.prop("disabled",!0).attr("value",d);var g=a("#csframework_form").serialize();a.post("options.php",g).error(function(){alert("Error, Please try again.")}).success(function(){b.prop("disabled",!1).attr("value",e),f.hide().fadeIn().delay(250).fadeOut()}),c.preventDefault()}else b.addClass("disabled").attr("value",d)})})},"undefined"!=typeof a.widget&&"undefined"!=typeof a.ui&&"undefined"!=typeof a.ui.dialog&&a.widget("ui.dialog",a.ui.dialog,{_createOverlay:function(){this._super(),this.options.modal&&this._on(this.overlay,{click:"close"})}}),a.SPFRAMEWORK.ICONS_MANAGER=function(){var c,d=this,f=!0;d.init=function(){e.on("click",".sp-icon-add",function(d){d.preventDefault();var g=a(this),h=a("#sp-icon-dialog"),i=h.find(".sp-dialog-load"),j=(h.find(".sp-dialog-select"),h.find(".sp-dialog-insert"),h.find(".sp-icon-search"));c=g.closest(".sp-icon-select"),h.dialog({width:850,height:700,modal:!0,resizable:!1,closeOnEscape:!0,position:{my:"center",at:"center",of:b},open:function(){e.addClass("sp-icon-scrolling"),a(".ui-dialog-titlebar-close").addClass("ui-button"),a(b).on("resize",function(){var c=a(b).height(),d=Math.floor(c-237),e=Math.floor(c-125);h.dialog("option","height",e).parent().css("max-height",e),h.css("overflow","auto"),i.css("height",d)}).resize()},close:function(){e.removeClass("sp-icon-scrolling")}}),f&&a.ajax({type:"POST",url:ajaxurl,data:{action:"sp-lw-get-icons"},success:function(b){i.html(b),f=!1,i.on("click","a",function(b){b.preventDefault();var d=a(this).data("icon");c.find("i").removeAttr("class").addClass(d),c.find("input").val(d).trigger("change"),c.find(".sp-icon-preview").removeClass("hidden"),c.find(".sp-icon-remove").removeClass("hidden"),h.dialog("close")}),j.keyup(function(){var b=a(this).val(),c=i.find("a");c.each(function(){var c=a(this);c.data("icon").search(new RegExp(b,"i"))<0?c.hide():c.show()})}),i.find(".sp-icon-tooltip").sptooltip({html:!0,placement:"top",container:"body"})}})}),e.on("click",".sp-icon-remove",function(b){b.preventDefault();var c=a(this),d=c.closest(".sp-icon-select");d.find(".sp-icon-preview").addClass("hidden"),d.find("input").val("").trigger("change"),c.addClass("hidden")})},d.init()},a.SPFRAMEWORK.SHORTCODE_MANAGER=function(){var c,f=this;f.init=function(){var d,g,h,i,j,k=a("#sp-shortcode-dialog"),l=k.find(".sp-dialog-insert"),m=k.find(".sp-dialog-load"),n=k.find(".sp-dialog-select"),o=!1;e.on("click",".sp-shortcode",function(c){c.preventDefault(),n.SPFRAMEWORK_CHOSEN(),i=a(this),o=i.hasClass("sp-shortcode-textarea"),j=i.data("editor-id"),k.dialog({width:850,height:700,modal:!0,resizable:!1,closeOnEscape:!0,position:{my:"center",at:"center",of:b},open:function(){e.addClass("sp-shortcode-scrolling"),a(".ui-dialog-titlebar-close").addClass("ui-button"),a(b).on("resize",function(){var c=a(b).height(),d=Math.floor(c-281),e=Math.floor(c-125);k.dialog("option","height",e).parent().css("max-height",e),k.css("overflow","auto"),m.css("height",d)}).resize()},close:function(){o=!1,e.removeClass("sp-shortcode-scrolling")}})}),n.on("change",function(){var b=a(this);d=b.val(),g=b.find(":selected").data("view"),d.length?a.ajax({type:"POST",url:ajaxurl,data:{action:"sp-get-shortcode",shortcode:d},success:function(b){m.html(b),l.parent().removeClass("hidden"),h=a(".sp-shortcode-clone",k).clone(),m.SPFRAMEWORK_DEPENDENCY(),m.SPFRAMEWORK_DEPENDENCY("sub"),m.SPFRAMEWORK_RELOAD_PLUGINS()}}):(l.parent().addClass("hidden"),m.html(""))}),l.on("click",function(b){b.preventDefault();var e="",h="data-atts",l="data-clone-atts",m="data-clone-id";switch(g){case"contents":a("["+h+"]",".sp-dialog-load").each(function(){var b=a(this),c=b.data("atts");e+="["+c+"]",e+=b.val(),e+="[/"+c+"]"});break;case"clone":e+="["+d,a("["+h+"]",".sp-dialog-load .sp-element:not(.hidden)").each(function(){var b=a(this),c=b.data("atts");console.log(c),e+=f.validate_atts(c,b)}),e+="]",a("["+m+"]",".sp-dialog-load").each(function(){var b=a(this),c=b.data("clone-id");e+="["+c,a("["+l+"]",b.find(".sp-element").not(".hidden")).each(function(){var b=a(this),d=b.data("clone-atts");"content"!==d?e+=f.validate_atts(d,b):"content"===d&&(e+="]",e+=b.val(),e+="[/"+c)}),e+="]"}),e+="[/"+d+"]";break;case"clone_duplicate":a("["+m+"]",".sp-dialog-load").each(function(){var b=a(this),c=b.data("clone-id");e+="["+c,a("["+l+"]",b.find(".sp-element").not(".hidden")).each(function(){var b=a(this),d=b.data("clone-atts");"content"!==d?e+=f.validate_atts(d,b):"content"===d&&(e+="]",e+=b.val(),e+="[/"+c)}),e+="]"});break;default:e+="["+d,a("["+h+"]",".sp-dialog-load .sp-element:not(.hidden)").each(function(){var b=a(this),c=b.data("atts");"content"!==c?e+=f.validate_atts(c,b):"content"===c&&(e+="]",e+=b.val(),e+="[/"+d)}),e+="]"}if(o){var n=i.next();n.val(f.insertAtChars(n,e)).trigger("change")}else f.send_to_editor(e,j);c=null,k.dialog("close")});var p=0;k.on("click","#shortcode-clone-button",function(b){b.preventDefault();var c=h.clone().hide();c.find("input:radio").attr("name","_nonce_"+p),a(".sp-shortcode-clone:last").after(c),c.slideDown(100),c.find(".sp-remove-clone").show().on("click",function(a){c.slideUp(100,function(){c.remove()}),a.preventDefault()}),c.SPFRAMEWORK_DEPENDENCY("sub"),c.SPFRAMEWORK_RELOAD_PLUGINS(),p++})},f.validate_atts=function(b,e){var f;return e.data("check")!==d&&c===b?"":(c=b,e.closest(".pseudo-field").hasClass("hidden")===!0?"":e.hasClass("pseudo")===!0?"":(f=e.is(":checkbox")||e.is(":radio")?e.is(":checked")?e.val():"":e.val(),e.data("check")!==d&&(f=e.closest(".sp-element").find("input:checked").map(function(){return a(this).val()}).get()),null!==f&&f!==d&&""!==f&&0!==f.length?" "+b+'="'+f+'"':""))},f.insertAtChars=function(a,b){var c="undefined"!=typeof a[0].name?a[0]:a;return c.value.length&&"undefined"!=typeof c.selectionStart?(c.focus(),c.value.substring(0,c.selectionStart)+b+c.value.substring(c.selectionEnd,c.value.length)):(c.focus(),b)},f.send_to_editor=function(b,c){var d;if("undefined"!=typeof tinymce&&(d=tinymce.get(c)),d&&!d.isHidden())d.execCommand("mceInsertContent",!1,b);else{var e=a("#"+c);e.val(f.insertAtChars(e,b)).trigger("change")}},f.init()},"function"==typeof Color&&(Color.fn.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var a=parseInt(this._color,10).toString(16);if(this.error)return"";if(a.length<6)for(var b=6-a.length-1;b>=0;b--)a="0"+a;return"#"+a}),a.SPFRAMEWORK.PARSE_COLOR_VALUE=function(a){var b=a.replace(/\s+/g,""),c=-1!==b.indexOf("rgba")?parseFloat(100*b.replace(/^.*,(.+)\)/,"$1")):100,d=100>c?!0:!1;return{value:b,alpha:c,rgba:d}},a.fn.SPFRAMEWORK_COLORPICKER=function(){return this.each(function(){var b=a(this);if(b.data("rgba")!==!1){var c=a.SPFRAMEWORK.PARSE_COLOR_VALUE(b.val());b.wpColorPicker({clear:function(){b.trigger("keyup")},change:function(a,c){var d=c.color.toString();b.closest(".wp-picker-container").find(".sp-alpha-slider-offset").css("background-color",d),b.val(d).trigger("change")},create:function(){var d=b.data("a8cIris"),f=b.closest(".wp-picker-container"),g=a('<div class="sp-alpha-wrap"><div class="sp-alpha-slider"></div><div class="sp-alpha-slider-offset"></div><div class="sp-alpha-text"></div></div>').appendTo(f.find(".wp-picker-holder")),h=g.find(".sp-alpha-slider"),i=g.find(".sp-alpha-text"),j=g.find(".sp-alpha-slider-offset");h.slider({slide:function(a,c){var e=parseFloat(c.value/100);d._color._alpha=e,b.wpColorPicker("color",d._color.toString()),i.text(1>e?e:"")},create:function(){var k=parseFloat(c.alpha/100),l=1>k?k:"";i.text(l),j.css("background-color",c.value),f.on("click",".wp-picker-clear",function(){d._color._alpha=1,i.text(""),h.slider("option","value",100).trigger("slide")}),f.on("click",".wp-picker-default",function(){var c=a.SPFRAMEWORK.PARSE_COLOR_VALUE(b.data("default-color")),e=parseFloat(c.alpha/100),f=1>e?e:"";d._color._alpha=e,i.text(f),h.slider("option","value",c.alpha).trigger("slide")}),f.on("click",".wp-color-result",function(){g.toggle()}),e.on("click.wpcolorpicker",function(){g.hide()})},value:c.alpha,step:1,min:1,max:100})}})}else b.wpColorPicker({clear:function(){b.trigger("keyup")},change:function(a,c){b.val(c.color.toString()).trigger("change")}})})},a.SPFRAMEWORK.WIDGET_RELOAD_PLUGINS=function(){a(c).on("widget-added widget-updated",function(a,b){b.SPFRAMEWORK_RELOAD_PLUGINS(),b.SPFRAMEWORK_DEPENDENCY()})},a.fn.SPFRAMEWORK_TOOLTIP=function(){return this.each(function(){var b=f?"right":"left";a(this).sptooltip({html:!0,placement:b,container:"body"})})},a.fn.SPFRAMEWORK_RELOAD_PLUGINS=function(){return this.each(function(){a(".chosen",this).SPFRAMEWORK_CHOSEN(),a(".sp-field-image-select",this).SPFRAMEWORK_IMAGE_SELECTOR(),a(".sp-field-image",this).SPFRAMEWORK_IMAGE_UPLOADER(),a(".sp-field-gallery",this).SPFRAMEWORK_IMAGE_GALLERY(),a(".sp-field-sorter",this).SPFRAMEWORK_SORTER(),a(".sp-field-upload",this).SPFRAMEWORK_UPLOADER(),a(".sp-field-typography",this).SPFRAMEWORK_TYPOGRAPHY(),a(".sp-field-color-picker",this).SPFRAMEWORK_COLORPICKER(),a(".sp-help",this).SPFRAMEWORK_TOOLTIP()})},a(c).ready(function(){a(".sp-framework").SPFRAMEWORK_TAB_NAVIGATION(),a(".sp-reset-confirm, .sp-import-backup").SPFRAMEWORK_CONFIRM(),a(".sp-content, .wp-customizer, .widget-content, .sp-taxonomy").SPFRAMEWORK_DEPENDENCY(),a(".sp-field-group").SPFRAMEWORK_GROUP(),a(".sp-save").SPFRAMEWORK_SAVE(),e.SPFRAMEWORK_RELOAD_PLUGINS(),a.SPFRAMEWORK.ICONS_MANAGER(),a.SPFRAMEWORK.SHORTCODE_MANAGER(),a.SPFRAMEWORK.WIDGET_RELOAD_PLUGINS()})}(jQuery,window,document);