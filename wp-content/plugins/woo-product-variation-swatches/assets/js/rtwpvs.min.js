!function(t){"use strict";t.fn.rtWpvsVariationSwatchesForm=function(){return this._variation_form=t(this),this.product_variations=this._variation_form.data("product_variations"),this._is_ajax=!!this.product_variations,this._is_mobile=t("body").hasClass("rtwpvs-is-mobile"),this.start=function(){var i=this;this._variation_form.find(".rtwpvs-terms-wrapper").each(function(){var r=t(this),e=r.parent().find("select.rtwpvs-wc-select");r.on("touchstart click",".rtwpvs-term:not(.rtwpvs-radio-term)",function(r){r.preventDefault(),r.stopPropagation();var a=t(this),o=a.hasClass("selected"),s=a.data("term");o&&rtwpvs_params.reselect_clear&&(s="",console.log("selected")),e.val(s).trigger("change").trigger("click").trigger("focusin"),i._is_mobile&&e.trigger("touchstart"),a.trigger("focus"),o?a.trigger("rtwpvs-unselected-term",[s,e,this._variation_form]):a.trigger("rtwpvs-selected-term",[s,e,this._variation_form])}),r.on("change","input.rtwpvs-radio-button-term:radio",function(r){r.preventDefault(),r.stopPropagation();var a=t(this),o=a.val(),s=a.parent(".rtwpvs-term.rtwpvs-radio-term"),n=s.hasClass("selected");n&&rtwpvs_params.reselect_clear&&(o=""),e.val(o).trigger("change").trigger("click").trigger("focusin"),i._is_mobile&&e.trigger("touchstart"),rtwpvs_params.reselect_clear?n?_.delay(function(){a.prop("checked",!1),s.trigger("rtwpvs-unselected-term",[o,e,this._variation_form])},1):s.trigger("rtwpvs-selected-term",[o,e,this._variation_form]):rtwpvs_params.reselect_clear||a.parent(".rtwpvs-term.rtwpvs-radio-term").removeClass("selected disabled").addClass("selected").trigger("rtwpvs-selected-term",[o,e,this._variation_form])}),rtwpvs_params.reselect_clear&&r.on("touchstart click","input.rtwpvs-radio-button-term:radio",function(i){i.preventDefault(),i.stopPropagation(),t(this).trigger("change")})}),setTimeout(function(){i._variation_form.trigger("reload_product_variations"),i._variation_form.trigger("rtwpvs_loaded",[i])},1)},this.update_trigger=function(){this._variation_form.on("rtwpvs_loaded",{that:this},this.loaded_triggered),this._variation_form.on("woocommerce_update_variation_values",this.update_variation_triggered),this._variation_form.on("reset_data",{that:this},this.reset_triggered),this._variation_form.on("woocommerce_variation_has_changed",{that:this},this.variation_has_changed_triggered)},this.update_variation_triggered=function(i){t(this).find(".rtwpvs-terms-wrapper").each(function(){var i=t(this),r=i.parent().find("select.rtwpvs-wc-select"),e=r.find("option:selected").val()||"",a=r.find("option:selected"),o=r.find("option").eq(1),s=[];r.find("option").each(function(){""!==t(this).val()&&(s.push(t(this).val()),e=a?a.val():o.val())}),setTimeout(function(){i.find(".rtwpvs-term").each(function(){var i=t(this),r=i.attr("data-term");i.removeClass("selected disabled").addClass("disabled"),-1!==s.indexOf(r)?(i.removeClass("disabled").find("input.rtwpvs-radio-button-term:radio").prop("disabled",!1),r===e&&i.addClass("selected").find("input.rtwpvs-radio-button-term:radio").prop("checked",!0)):i.find("input.rtwpvs-radio-button-term:radio").prop("disabled",!0).prop("checked",!1),r===e&&i.addClass("selected").find("input.rtwpvs-radio-button-term:radio").prop("disabled",!1).prop("checked",!0)}),i.trigger("rtwpvs-terms-updated")},1)})},this.variation_has_changed_triggered=function(i){i.data.that._is_ajax||t(this).find(".rtwpvs-terms-wrapper").each(function(){var i=t(this),r=i.parent().find("select.rtwpvs-wc-select"),e=r.find("option:selected").val()||"",a=r.find("option:selected"),o=r.find("option").eq(1),s=[];r.find("option").each(function(){""!==t(this).val()&&(s.push(t(this).val()),e=a?a.val():o.val())}),setTimeout(function(){i.find(".rtwpvs-term").each(function(){var i=t(this),r=i.attr("data-term");i.removeClass("selected disabled"),r===e&&i.addClass("selected").find("input.rtwpvs-radio-button-term:radio").prop("disabled",!1).prop("checked",!0)}),i.trigger("rtwpvs-terms-updated")},1)})},this.reset_triggered=function(i){i.data.that._is_ajax&&t(this).find(".rtwpvs-terms-wrapper").each(function(){t(this).find(".rtwpvs-term").removeClass("selected disabled").find("input.rtwpvs-radio-button-term:radio").prop("disabled",!1).prop("checked",!1)})},this.loaded_triggered=function(i){var r=i.data.that;if(r._is_ajax){var e={};r.product_variations.map(function(t){Object.keys(t.attributes).map(function(i){e[i]||(e[i]=[]),t.attributes[i]&&-1===e[i].indexOf(t.attributes[i])&&e[i].push(t.attributes[i])})}),t(i.target).find(".rtwpvs-terms-wrapper").each(function(){var i=t(this).data("attribute_name");t(this).find(".rtwpvs-term").each(function(){var r=t(this),a=r.attr("data-term");t.isEmptyObject(e)||-1!==e[i].indexOf(a)||r.removeClass("selected").addClass("disabled").find("input.rtwpvs-radio-button-term:radio").prop("disabled",!0).prop("checked",!1)})})}},this.start(),this.update_trigger(),this},t(document).on("wc_variation_form",".variations_form",function(){t(this).rtWpvsVariationSwatchesForm()}),t(document.body).on("post-load",function(){t(".variations_form").each(function(){t(this).wc_variation_form()})}),t(document).on("yith_infs_added_elem",function(){t(".variations_form").each(function(){t(this).wc_variation_form()})}),t(document).on("yith-wcan-ajax-filtered",function(){t(".variations_form").each(function(){t(this).wc_variation_form()})}),t(document).on("wood-images-loaded",function(){t(".variations_form").each(function(){t(this).wc_variation_form()})}),t(document).on("berocket_ajax_products_loaded",function(){t(".variations_form").each(function(){t(this).wc_variation_form()})}),t(".shop-container .products").on("append.infiniteScroll",function(i,r,e){t(".variations_form").each(function(){t(this).wc_variation_form()})}),t(document).on("facetwp-loaded",function(){t(".variations_form").each(function(){t(this).wc_variation_form()})}),t("body").on("aln_reloaded",function(){setTimeout(function(){t(".variations_form").each(function(){t(this).wc_variation_form()})},100)})}(jQuery);
