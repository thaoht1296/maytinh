!function(t){"use strict";t.fn.wpColorPicker&&t("input.rtwpvs-color-picker").wpColorPicker(),jQuery(document).ajaxComplete(function(e,i,a){if(i&&4===i.readyState&&200===i.status&&a.data&&0<=a.data.indexOf("action=add-tag")){var r=wpAjax.parseAjaxResponse(i.responseXML,"ajax-response");if(!r||r.errors)return;return t.fn.wpColorPicker&&t("input.rtwpvs-color-picker").wpColorPicker(),void t("button.rtwpvs-remove-image").trigger("click")}}),t(document).on("click","button.rtwpvs-upload-image",function(){var e;event.stopPropagation();var i=t(this);if("undefined"!=typeof wp&&wp.media&&wp.media.editor){if(e)return void e.open();(e=wp.media.frames.select_image=wp.media({title:rtwpvs.media_title,button:{text:rtwpvs.button_title},multiple:!1})).on("select",function(){var a=e.state().get("selection").first().toJSON();if(""!==t.trim(a.id)){var r=void 0===a.sizes.thumbnail?a.sizes.full.url:a.sizes.thumbnail.url;i.prev().val(a.id),i.closest(".rtwpvs-image-wrapper").find("img").attr("src",r),i.next().show()}}),e.on("open",function(){var t=e.state().get("selection"),a=i.prev().val(),r=wp.media.attachment(a);r.fetch(),t.add(r?[r]:[])}),e.open()}}),t(document).on("click","button.rtwpvs-remove-image",function(){event.preventDefault(),event.stopPropagation();var e=t(this),i=e.closest(".rtwpvs-image-wrapper").find("img").data("placeholder");return e.closest(".rtwpvs-image-wrapper").find("img").attr("src",i),e.prev().prev().val(""),e.hide(),!1}),t("#rtwpvs-settings-wrapper").on("click",".nav-tab",function(e){e.preventDefault();var i=t(this).data("target");if(t(this).addClass("nav-tab-active").siblings().removeClass("nav-tab-active"),t("#"+i).show().siblings().hide(),t("#_last_active_tab").val(i),history.pushState){var a=function(t,e){var i=window.location.href,a=location.hash;if((i=i.replace(a,"")).indexOf("?")>=0){var r=i.substring(i.indexOf("?")+1).split("&"),n=!1;r.forEach(function(i,a){var o=i.split("=");o[0]==t&&(r[a]=t+"="+e,n=!0)}),n||r.push(t+"="+e),i=i.substring(0,i.indexOf("?")+1)+r.join("&")}else i+="?"+t+"="+e;return i+a}("section",i);window.history.pushState({path:a},"",a)}})}(jQuery);
