!function(t){"use strict";function e(){t(document).off("click",".rtwpvg-add-image"),t(document).on("click",".rtwpvg-add-image",i),t(document).on("click",".rtwpvg-remove-image",o),t(".woocommerce_variation").each(function(){var e=t(this).find(".options");t(this).find(".rtwpvg-gallery-wrapper").insertBefore(e)})}function i(e){e.preventDefault(),e.stopPropagation();var i=this,o=void 0,r=t(this).data("product_variation_id"),c=t(this).data("product_variation_loop");if("undefined"!=typeof wp&&wp.media&&wp.media.editor){if(o)return void o.open();(o=wp.media.frames.select_image=wp.media({title:rtwpvg_admin.choose_image,button:{text:rtwpvg_admin.add_image},library:{type:["image"]},multiple:!0})).on("select",function(){var e=o.state().get("selection").toJSON().map(function(t){if("image"===t.type){var e=t.id,i=t.sizes,o=(i=void 0===i?{}:i).thumbnail,a=i.full,n=o?o.url:a.url;return wp.template("rtwpvg-image")({id:e,url:n,product_variation_id:r,loop:c})}}).join("");t(i).parent().prev().find(".rtwpvg-images").append(e),n(),a(i)}),o.open()}}function o(e){e.preventDefault(),e.stopPropagation();var i=this;a(this),setTimeout(function(){t(i).parent().remove()},1)}function a(e){t(e).closest(".woocommerce_variation").addClass("variation-needs-update"),t("button.cancel-variation-changes, button.save-variation-changes").removeAttr("disabled"),t("#variable_product_options").trigger("woocommerce_variations_input_changed")}function n(){t(".rtwpvg-images").sortable({items:"li.image",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"rtwpvg-sortable-placeholder",start:function(t,e){e.item.css("background-color","#f6f6f6")},stop:function(t,e){e.item.removeAttr("style")},update:function(){a(this)}})}t("#rtwpvg-settings-wrapper").on("click",".nav-tab",function(e){e.preventDefault();var i=t(this),o=i.data("target");if(i.addClass("nav-tab-active").siblings().removeClass("nav-tab-active"),t("#"+o).show().siblings().hide(),t("#_last_active_tab").val(o),history.pushState){var a=function(t,e){var i=window.location.href,o=location.hash;if((i=i.replace(o,"")).indexOf("?")>=0){var a=i.substring(i.indexOf("?")+1).split("&"),n=!1;a.forEach(function(i,o){var r=i.split("=");r[0]==t&&(a[o]=t+"="+e,n=!0)}),n||a.push(t+"="+e),i=i.substring(0,i.indexOf("?")+1)+a.join("&")}else i+="?"+t+"="+e;return i+o}("section",o);window.history.pushState({path:a},"",a)}}),t("#woocommerce-product-data").on("woocommerce_variations_loaded",function(){e(),n()}),t("#variable_product_options").on("woocommerce_variations_added",function(){e(),n()})}(jQuery);
